---
phase: 01.1-fix-environment-separation-of-concerns
plan: 02
subsystem: rewards, interactions, environment-scoping
tags: [array-rewards, overcooked, separation-of-concerns, parity-tests]

# Dependency graph
requires:
  - phase: 01-06
    provides: "Array reward functions (delivery, onion-in-pot, soup-in-dish) and compose_rewards"
  - phase: 01-04
    provides: "Array interaction processor and parity test (test_interaction_parity)"
provides:
  - "Overcooked-specific array rewards in cogrid/envs/overcooked/array_rewards.py"
  - "Overcooked interaction parity test in cogrid/envs/overcooked/test_interactions.py"
  - "Generic compose_rewards in cogrid/core/array_rewards.py (environment-agnostic)"
  - "Backward-compatible re-exports from cogrid.core.array_rewards"
affects: [01.1-03-wiring, phase-02]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Environment-specific code in envs/{env}/ modules, generic utilities in core/"
    - "Backward-compatible re-exports with TODO removal marker"

key-files:
  created:
    - cogrid/envs/overcooked/array_rewards.py
    - cogrid/envs/overcooked/test_interactions.py
  modified:
    - cogrid/core/array_rewards.py
    - cogrid/core/interactions.py

key-decisions:
  - "Backward-compatible re-exports added in core/array_rewards.py to prevent import breakage during transition"
  - "test_interaction_parity kept as standalone callable (not pytest) to match existing usage pattern"

patterns-established:
  - "Environment-specific array functions scoped to envs/{env}/ with backward-compat re-exports during transition"

# Metrics
duration: 3min
completed: 2026-02-11
---

# Phase 01.1 Plan 02: Move Overcooked Rewards and Tests Summary

**Overcooked-specific array reward functions and interaction parity test moved from core/ to envs/overcooked/ with backward-compatible re-exports**

## Performance

- **Duration:** 3 min
- **Started:** 2026-02-11T18:36:23Z
- **Completed:** 2026-02-11T18:40:14Z
- **Tasks:** 1
- **Files modified:** 4

## Accomplishments
- Moved delivery_reward_array, onion_in_pot_reward_array, soup_in_dish_reward_array and _find_pot_index from core/array_rewards.py to envs/overcooked/array_rewards.py
- Moved test_interaction_parity (8 parity tests) from core/interactions.py to envs/overcooked/test_interactions.py
- Kept generic compose_rewards in core/array_rewards.py (environment-agnostic utility)
- Added backward-compatible re-exports to prevent import breakage during Phase 01.1 transition

## Task Commits

Each task was committed atomically:

1. **Task 1: Move Overcooked reward functions and interaction test to envs/overcooked/** - `316c6f8` (feat)

## Files Created/Modified
- `cogrid/envs/overcooked/array_rewards.py` - Overcooked-specific array reward functions (delivery, onion-in-pot, soup-in-dish)
- `cogrid/envs/overcooked/test_interactions.py` - Overcooked interaction parity test (8 test scenarios)
- `cogrid/core/array_rewards.py` - Stripped to generic compose_rewards + backward-compat re-exports
- `cogrid/core/interactions.py` - Removed test_interaction_parity function

## Decisions Made
- Backward-compatible re-exports added in core/array_rewards.py with TODO marker for removal after Plan 03 wiring
- test_interaction_parity preserved as standalone callable function (not converted to pytest) to match existing usage pattern

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered
None.

## User Setup Required
None - no external service configuration required.

## Next Phase Readiness
- Overcooked-specific code is now scoped under envs/overcooked/
- core/interactions.py still contains Overcooked-specific functional code (process_interactions_array, build_interaction_tables) -- this is Plan 03's responsibility
- Backward-compatible re-exports ensure existing callers work until Plan 03 completes wiring

## Self-Check: PASSED

All files verified present. Commit 316c6f8 verified in git log.

---
*Phase: 01.1-fix-environment-separation-of-concerns*
*Completed: 2026-02-11*
